---
type: diary
created: 2024-04-16T11:04
---

- [x] 量化摇杆输入 #debug ✅ 2024-04-16
	- [gamepad tester](https://hardwaretester.com/gamepad)
		- 量化手柄的硬件输入
	- 对于按键，都为 bool action
	- 对于摇杆，需要判断其范围
		- debug key gamepad left thumbstick axis
			- Key -> FKey
			- Action Value -> FInputActionValue
		- left axis
			- x 右 正
			- y 上 正
		- right axis
			- x 右 正
			- y 下 正
	- deadzone 设定
		- 有的摇杆出现漂移，无法固定在 0 的位置
		- 定义一个阈值，在这个范围内摇杆没有作用
		- 在 imc 中可以通过 modifier 来定义
		- 输入依旧可检测，但只有在 deadzone 外的值才会被应用
		- 将 deadzone 之外的区间，重新映射到 0-1
		- 0.2 1 -> 0 1
		- 假如当前是 0.4 映射后是 0.25
- [x] 输入是如何决定速度的 ✅ 2024-04-16
	- 在 imc 中定义了 scalar modifier
	- 将输入范围映射到了 50 50
	- 这样每次得到的 action value 就是 0-50 区间值
	- 一般直接将这个值作为 add movement input 的输入
	- 这个值和方向一起作用，决定了加速度的方向和大小
	- 在 comp 内部，直接将输入clamp到 1，应用了 max acce 在这个方向上
	- 和输入量的大小无关
	- [ ] 对于手柄和键盘的处理方式区别在哪里
		- analog input modifier
- [ ] 输入检测的速度会超过帧率吗？
	- 目前观察到的是，每一帧一个输入consume
- 对于 add movement input，应该永远输入 0-1 范围
	- deadzone 映射
	- 如果使用 scalar modifier 映射到过大的范围，comp 内部无法检测到手柄微小的移动量
	- analog input modifier 记录了手柄的输入量
- 做出只狼的移动效果
	- 小输入量，保持到walk状态
	- 大输入量，保持到run状态
	- 可以将输入量进行了个 remap 断层，曲线映射
		- response curve modifier
		- float curve
		- 范围为 x -1 -> 1  y -1 -> 1 
		- 每个轴单独设置，没有考虑对角性
	- 自定义函数，映射手柄输入
		- 分为 0.6 以下  和  .6 到  1 之间
- [ ] 手柄输入的纠正问题
	- 手柄的输入是一个方形空间，可以将其 clamp 到圆形？
	- ![[Pasted image 20240416172612.png]]
	- 结合 als 中 fix diagonal gamepad value 函数
- [ ] anim seq root motion setting   use normalized root motion scale  一旦勾选，rm 会跑的很远，取消则正常？
	- https://forums.unrealengine.com/t/root-motion-weird-behavior/794700/2
	- > This happens because your root bone might be 100x scale if you work with blender. Just turn off Use Normalized root motion scale in your animation. It will fix the problem